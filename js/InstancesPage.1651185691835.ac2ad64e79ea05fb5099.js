"use strict";(self.webpackChunkacs=self.webpackChunkacs||[]).push([[996],{70391:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var r=n(93264),a=n.n(r),l=n(80123),i=n(39173),c=n(14748),o=n(16530),u=n(70943),s=n(87462),m=n(45987),p=["children","to"];const d=function(e){var t=e.children,n=e.to,r=(0,m.Z)(e,p);return a().createElement(u.BreadcrumbItem,(0,s.Z)({},r,{render:function(e){var r=e.className,l=e.ariaCurrent;return a().createElement(o.Link,{className:r,"aria-current":l,to:n},t)}}))};var E=n(15861),f=n(87757),v=n.n(f),g=n(88767),h=n(22512),b=function(){var e=(0,E.Z)(v().mark((function e(t){var n,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Z.get("/api/dinosaurs_mgmt/v1/dinosaurs/".concat(t));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();const y=function(){var e,t=(e=(0,o.useParams)().instanceId,(0,g.useQuery)(["instance",e],(function(){return b(e)}))),n=t.data;return t.isFetching?a().createElement(u.Bullseye,null,a().createElement(u.Spinner,null)):a().createElement("div",null,a().createElement(l.Z,null,a().createElement(u.Flex,{direction:{default:"column"}},a().createElement(u.FlexItem,null,a().createElement(u.Breadcrumb,null,a().createElement(d,{to:"/instances"},"ACS instances"),a().createElement(u.BreadcrumbItem,{isActive:!0},n.name))),a().createElement(u.FlexItem,null,a().createElement(i.Z,{title:n.name})))),a().createElement(c.Z,null))}},1974:(e,t,n)=>{n.r(t),n.d(t,{default:()=>N});var r=n(70885),a=n(93264),l=n.n(a),i=n(16530),c=n(14748),o=n(80123),u=n(39173),s=n(70943),m=n(38877),p=n(96733);var d=n(15861),E=n(87757),f=n.n(E),v=n(88767),g=n(22512),h=function(){var e=(0,d.Z)(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.Z.get("/api/dinosaurs_mgmt/v1/dinosaurs");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=(0,d.Z)(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.Z.post("/api/dinosaurs_mgmt/v1/dinosaurs?async=true",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=(0,d.Z)(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.Z.delete("/api/dinosaurs_mgmt/v1/dinosaurs/".concat(t));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function C(){var e=(0,v.useQueryClient)();return(0,v.useMutation)(y,{onSuccess:function(){e.invalidateQueries("instances")}})}var w=n(4942);const O=function(e){var t=e.toggleIcon,n=e.id,i=e.value,c=e.handleSelect,o=e.isDisabled,u=void 0!==o&&o,m=e.children,p=e.direction,d=void 0===p?"down":p,E=e.isCreatable,f=void 0!==E&&E,v=e.variant,g=void 0===v?null:v,h=e.placeholderText,b=void 0===h?"":h,y=(0,a.useState)(!1),C=(0,r.Z)(y,2),w=C[0],O=C[1],T="typeahead"===g?s.SelectVariant.typeahead:s.SelectVariant.single;return l().createElement(s.Select,{variant:T,toggleIcon:t,id:n,isDisabled:u,isOpen:w,onSelect:function(e,t){O(!1),c(n,t)},onToggle:O,selections:i,direction:d,isCreatable:f,placeholderText:b,toggleId:n},m)};function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D={name:"",cloud_provider:"aws",region:"us-east-1",availabilityZones:"multi"};const Z=function(e){var t=e.isOpen,n=e.onClose,i=e.onRequestCreate,c=(0,a.useState)(null),o=(0,r.Z)(c,2),u=o[0],m=o[1],p=(0,a.useState)(D),E=(0,r.Z)(p,2),v=E[0],g=E[1],h=(0,a.useState)(!1),b=(0,r.Z)(h,2),y=b[0],C=b[1];function w(e,t){var n=t.currentTarget.id;g((function(e){return S(S({},e),{},{availabilityZones:n})}))}function T(){return(T=(0,d.Z)(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.next=3,i(v);case 3:t=e.sent,C(!1),t instanceof Error?m(t):(g(D),n());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return l().createElement(s.Modal,{variant:s.ModalVariant.small,title:"Create ACS instance",isOpen:t,onClose:n,actions:[l().createElement(s.Button,{key:"createInstance",variant:"primary",onClick:function(){return T.apply(this,arguments)},isLoading:y,isDisabled:y||!(null!=v&&v.name)},"Create instance"),l().createElement(s.Button,{key:"cancel",variant:"link",onClick:n,isDisabled:y},"Cancel")]},u&&l().createElement("div",{className:"pf-u-mb-md"},l().createElement(s.Alert,{variant:"danger",title:u.message})),l().createElement(s.Form,null,l().createElement(s.FormGroup,{label:"Name",isRequired:!0,fieldId:"name",helperText:"Must start with a letter and end with a letter or number. Valid characters include lowercase letters from a to z, numbers from 0 to 9, and hyphens ( - )."},l().createElement(s.TextInput,{isRequired:!0,type:"text",id:"name",name:"name",value:v.name,onChange:function(e){g((function(t){return S(S({},t),{},{name:e})}))}})),l().createElement(s.FormGroup,{label:"Cloud provider",isRequired:!0,fieldId:"cloud_provider"},l().createElement(s.Tile,{title:"Amazon Web Services",isSelected:"aws"===v.cloud_provider})),l().createElement(s.FormGroup,{label:"Cloud region",isRequired:!0,fieldId:"region"},l().createElement(O,{id:"region",value:v.region,handleSelect:function(e,t){g((function(e){return S(S({},e),{},{region:t})}))}},l().createElement(s.SelectOption,{value:"us-east-1"},"US-East, N. Virginia"),l().createElement(s.SelectOption,{value:"eu-west-1"},"EU-Ireland"))),l().createElement(s.FormGroup,{label:"Availability zones",isRequired:!0,fieldId:"availabilityZones"},l().createElement(s.ToggleGroup,{"aria-label":"Availability Zones"},l().createElement(s.ToggleGroupItem,{text:"Single",buttonId:"single",isSelected:"single"===v.availabilityZones,onChange:w,isDisabled:!0}),l().createElement(s.ToggleGroupItem,{text:"Multi",buttonId:"multi",isSelected:"multi"===v.availabilityZones,onChange:w})))))},x=function(e){var t=e.isOpen,n=e.instance,i=e.onRequestDelete,c=e.onClose,o=(0,a.useState)(""),u=(0,r.Z)(o,2),m=u[0],p=u[1],E=(0,a.useState)(!1),v=(0,r.Z)(E,2),g=v[0],h=v[1];function b(){return(b=(0,d.Z)(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,i(n.id);case 3:t=e.sent,h(!1),t.error||(p(""),c());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return n?l().createElement(s.Modal,{variant:s.ModalVariant.small,title:"Delete instance?",isOpen:t,onClose:c,actions:[l().createElement(s.Button,{key:"createInstance",variant:"danger",onClick:function(){return b.apply(this,arguments)},isLoading:g,isDisabled:g||n.name!==m},"Delete instance"),l().createElement(s.Button,{key:"cancel",variant:"link",onClick:c,isDisabled:g},"Cancel")]},l().createElement("div",{className:"pf-u-pb-md"},l().createElement("div",null,"This will permanently delete"," ",l().createElement("span",{className:"pf-u-font-weight-bold"},n.name),"."),l().createElement("div",null,"This action cannot be undone.")),l().createElement(s.Form,null,l().createElement(s.FormGroup,{label:"Confirmation",isRequired:!0,fieldId:"confirmationInstanceName"},l().createElement(s.TextInput,{isRequired:!0,type:"text",id:"confirmationInstanceName",name:"confirmationInstanceName",value:m,onChange:p})),l().createElement(s.HelperText,null,l().createElement(s.HelperTextItem,null,"Type ",l().createElement("span",{className:"pf-u-font-weight-bold"},n.name)," ","to confirm.")))):null};var P=n(327),k=n(12902);function I(e){return(0,P.Z)((0,k.Z)(e),"MM/dd/yyyy | h:mm:ss a")}const L=function(e){var t=e.isExpanded,n=e.onClose,r=e.instance,a=e.children;return l().createElement(s.Drawer,{isExpanded:t},l().createElement(s.DrawerContent,{panelContent:l().createElement(s.DrawerPanelContent,null,l().createElement(s.DrawerHead,null,l().createElement("div",null,l().createElement(s.TextContent,null,l().createElement(s.Text,{component:s.TextVariants.small},"Name")),l().createElement(s.TextContent,null,l().createElement(s.Text,{component:s.TextVariants.h1},null==r?void 0:r.name))),l().createElement(s.DrawerActions,null,l().createElement(s.DrawerCloseButton,{onClick:n}))),l().createElement(s.Divider,{component:"div"}),l().createElement(s.DrawerContentBody,null,r&&l().createElement(s.DescriptionList,{isHorizontal:!0},l().createElement(s.DescriptionListGroup,null,l().createElement(s.DescriptionListTerm,null,"Cloud provider"),l().createElement(s.DescriptionListDescription,null,r.cloud_provider)),l().createElement(s.DescriptionListGroup,null,l().createElement(s.DescriptionListTerm,null,"Region"),l().createElement(s.DescriptionListDescription,null,r.region)),l().createElement(s.DescriptionListGroup,null,l().createElement(s.DescriptionListTerm,null,"ID"),l().createElement(s.DescriptionListDescription,null,r.id)),l().createElement(s.DescriptionListGroup,null,l().createElement(s.DescriptionListTerm,null,"Owner"),l().createElement(s.DescriptionListDescription,null,r.owner)),l().createElement(s.DescriptionListGroup,null,l().createElement(s.DescriptionListTerm,null,"Created"),l().createElement(s.DescriptionListDescription,null,I(r.created_at))),l().createElement(s.DescriptionListGroup,null,l().createElement(s.DescriptionListTerm,null,"Updated"),l().createElement(s.DescriptionListDescription,null,I(r.updated_at))))))},a))},R=function(e){var t=e.isOpen,n=e.changingOwner,i=e.possibleOwners,c=e.onRequestChangeOwner,o=e.onClose,u=(0,a.useState)(""),m=(0,r.Z)(u,2),p=m[0],E=m[1],v=(0,a.useState)(!1),g=(0,r.Z)(v,2),h=g[0],b=g[1];if(!n)return null;function y(){return(y=(0,d.Z)(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,c(p);case 3:t=e.sent,b(!1),t.error||(E(""),o());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return l().createElement(s.Modal,{style:{overflow:"inherit"},variant:s.ModalVariant.small,title:"Change owner",isOpen:t,onClose:o,actions:[l().createElement(s.Button,{key:"changeOwner",variant:"primary",onClick:function(){return y.apply(this,arguments)},isLoading:h,isDisabled:h||!p},"Change owner"),l().createElement(s.Button,{key:"cancel",variant:"link",onClick:o,isDisabled:h},"Cancel")]},l().createElement(s.Form,null,l().createElement(s.FormGroup,{label:"Current owner",fieldId:"currentOwner"},l().createElement(s.TextContent,null,l().createElement(s.Text,{component:s.TextVariants.p},n.instance.owner))),l().createElement(s.FormGroup,{label:"New Owner",isRequired:!0,fieldId:"newOwner"},l().createElement(O,{id:"newOwner",value:p,handleSelect:function(e,t){E(t)},placeholderText:"Select new owner..."},i.map((function(e){return l().createElement(s.SelectOption,{key:e,value:e},e)}))))))};var j=n(35451);const A=function(e){return"ready"===e.status?l().createElement(s.Flex,null,l().createElement(s.FlexItem,null,l().createElement(j.ZP,{className:"pf-u-success-color-100"})),l().createElement(s.FlexItem,null,"Ready")):"N/A"};var F=["alice@redhat.com","bob@redhat.com","eve@redhat.com"];const N=(0,i.withRouter)((function(){var e,t=(0,i.useHistory)(),n=(0,v.useQuery)("instances",h),d=n.data,E=n.isFetching,f=(e=(0,v.useQueryClient)(),(0,v.useMutation)(b,{onSuccess:function(){e.invalidateQueries("instances")}})),g=C(),y=function(){var e=(0,a.useState)(1),t=(0,r.Z)(e,2),n=t[0],l=t[1],i=(0,a.useState)(20),c=(0,r.Z)(i,2),o=c[0],u=c[1];return{page:n,perPage:o,onSetPage:function(e,t){l(t)},onPerPageSelect:function(e,t){u(t)}}}(),w=y.page,O=y.perPage,T=y.onSetPage,S=y.onPerPageSelect,D=(0,a.useState)(null),P=(0,r.Z)(D,2),k=P[0],j=P[1],N=(0,a.useState)(null),B=(0,r.Z)(N,2),G=B[0],q=B[1],_=(0,a.useState)(null),M=(0,r.Z)(_,2),V=M[0],z=M[1],H=(0,a.useState)(null),Q=(0,r.Z)(H,2),U=Q[0],W=Q[1],J=(null==d?void 0:d.items)||[];return(0,a.useEffect)((function(){var e,t,n;null===(e=insights)||void 0===e||null===(t=e.chrome)||void 0===t||null===(n=t.appAction)||void 0===n||n.call(t,"sample-page")}),[]),E?l().createElement(s.Bullseye,null,l().createElement(s.Spinner,null)):l().createElement(L,{isExpanded:!!V,instance:V,onClose:function(){z(null)}},l().createElement(o.Z,null,l().createElement(u.Z,{title:"ACS Instances"})),l().createElement(c.Z,null,l().createElement(s.Card,null,0===(null==J?void 0:J.length)?l().createElement(s.EmptyState,null,l().createElement(s.EmptyStateIcon,{icon:p.ZP}),l().createElement(s.Title,{size:"lg",headingLevel:"h4"},"No ACS instances."),l().createElement(s.EmptyStateBody,null,"Create one to get started."),l().createElement(s.EmptyStatePrimary,null,l().createElement(s.Button,{variant:"primary",onClick:function(){return j({})}},"Create ACS instance"))):l().createElement(l().Fragment,null,l().createElement(s.Toolbar,null,l().createElement(s.ToolbarContent,null,l().createElement(s.ToolbarItem,null,l().createElement(s.Button,{variant:"primary",onClick:function(){return j({})}},"Create ACS instance")),l().createElement(s.ToolbarItem,{variant:"pagination",align:{default:"alignRight"}},l().createElement(s.Pagination,{itemCount:J.length,perPage:O,page:w,onSetPage:T,widgetId:"acs-instances-top-pagination",onPerPageSelect:S,isCompact:!0})))),l().createElement(m.TableComposable,{"aria-label":"ACS instances table"},l().createElement(m.Thead,null,l().createElement(m.Tr,null,l().createElement(m.Th,null,"Name"),l().createElement(m.Th,null,"Cloud Provider"),l().createElement(m.Th,null,"Region"),l().createElement(m.Th,null,"Owner"),l().createElement(m.Th,null,"Status"),l().createElement(m.Th,null,"Time Created"),l().createElement(m.Th,null))),l().createElement(m.Tbody,null,J.map((function(e){return l().createElement(m.Tr,{key:e.name,onRowClick:function(t){"button"!==t.target.getAttribute("type")&&z(e)},isRowSelected:(null==V?void 0:V.name)===(null==e?void 0:e.name)},l().createElement(m.Td,{dataLabel:"Name"},l().createElement(i.Link,{to:"/instances/instance/".concat(e.id)},e.name)),l().createElement(m.Td,{dataLabel:"Cloud Provider"},e.cloud_provider),l().createElement(m.Td,{dataLabel:"Region"},e.region),l().createElement(m.Td,{dataLabel:"Owner"},e.owner),l().createElement(m.Td,{dataLabel:"Status"},l().createElement(A,{status:e.status})),l().createElement(m.Td,{dataLabel:"Time Created<"},I(e.created_at)),l().createElement(m.Td,{isActionCell:!0},l().createElement(m.ActionsColumn,{items:[{title:"Details",onClick:function(n){n.preventDefault(),t.push("/instances/instance/".concat(e.id))}},{title:"Change Owner",onClick:function(t){t.preventDefault(),W({instance:e,newOwner:null})}},{title:"Delete",onClick:function(t){t.preventDefault(),q(e)}}]})))})))),l().createElement(s.Toolbar,null,l().createElement(s.ToolbarContent,null,l().createElement(s.ToolbarItem,{variant:"pagination",align:{default:"alignRight"}},l().createElement(s.Pagination,{itemCount:J.length,perPage:O,page:w,onSetPage:T,widgetId:"acs-instances-top-pagination",onPerPageSelect:S})))))),l().createElement(Z,{isOpen:!!k,onClose:function(){j(null)},onRequestCreate:function(e){return f.mutateAsync({region:e.region,cloud_provider:e.cloud_provider,name:e.name,multi_az:"multi"===e.availabilityZones}).catch((function(e){return e}))}}),l().createElement(x,{instance:G,isOpen:!!G,onClose:function(){q(null)},onRequestDelete:function(e){return g.mutateAsync(e).catch((function(e){return e}))}}),l().createElement(R,{isOpen:!!U,changingOwner:U,possibleOwners:F,onClose:function(){W(null)},onRequestChangeOwner:function(){return new Promise((function(e){setTimeout((function(){e({error:null})}),2e3)}))}})))}))},22512:(e,t,n)=>{n.d(t,{Z:()=>m});var r,a=n(4942),l=n(15861),i=n(87757),c=n.n(i),o=n(9669);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const m=((r=n.n(o)().create()).interceptors.request.use(function(){var e=(0,l.Z)(c().mark((function e(t){var n,r,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.chrome.auth.getUser();case 2:return e.next=4,insights.chrome.auth.getToken();case 4:return n=e.sent,r=t.baseURL||"",a=s(s({},t),{},{url:"".concat(r).concat(t.url)}),n&&(a.headers=s(s({},a.headers),{},{Authorization:"Bearer ".concat(n)})),delete a.customHost,e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r)}}]);
//# sourceMappingURL=../sourcemaps/InstancesPage.2b8c237fca73c0ddbe9f0e507fad5bf8.js.map